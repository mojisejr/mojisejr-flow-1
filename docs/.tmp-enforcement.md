# Temporary File Management Enforcement

## üö® MANDATORY .TMP FOLDER POLICY (CRITICAL)

### Policy Summary

**ALL COMMANDS MUST USE PROJECT .TMP FOLDER - NO EXCEPTIONS**

- ‚ùå **NEVER use system temp directories** (`/tmp/`, `$TEMP`, etc.)
- ‚ùå **NEVER create temporary files in project root or other folders**
- ‚úÖ **ALWAYS create temporary files in `.tmp/` folder ONLY**
- ‚úÖ **ALWAYS clean up `.tmp/` folder after each operation**
- ‚úÖ **ALWAYS ensure `.tmp/` folder is in `.gitignore`**

## Commands Updated with .tmp Folder Enforcement

### ‚úÖ GitHub Instruction Templates (.github/instructions/)

1. **fcs.instructions.md** - Context Management
   - Creates `.tmp/context-content.md` for issue body
   - Uses `--body-file .tmp/context-content.md` for GitHub CLI
   - Cleans up immediately after issue creation

2. **plan.instructions.md** - Task Planning
   - Creates `.tmp/task-content.md` for issue body
   - Includes validated context and verified dependencies
   - Uses `--body-file .tmp/task-content.md` for GitHub CLI
   - Cleans up after task creation

3. **impl.instructions.md** - Implementation Workflow
   - Creates `.tmp/issue-details.md` for issue metadata
   - Validates issue details before implementation
   - Cleans up temporary files after validation

4. **pr.instructions.md** - Pull Request Creation
   - Creates `.tmp/issue-info.md` for issue metadata
   - Creates `.tmp/pr-body.md` for PR body content
   - Uses `--body-file .tmp/pr-body.md` for GitHub CLI
   - Cleans up both temporary files after PR creation

### ‚úÖ Claude Code Slash Commands (.claude/commands/)

1. **fcs.md** - Context Management
   - Same .tmp folder enforcement as GitHub instructions
   - Automatic .tmp folder setup and cleanup

2. **plan.md** - Task Planning
   - Creates `.tmp/task-content.md` for issue generation
   - Mode-specific assignment and validation
   - Automatic cleanup after task creation

3. **impl.md** - Implementation Workflow
   - Creates `.tmp/issue-details.md` for issue validation
   - Environment and dependency checking
   - Temporary file cleanup after implementation

4. **pr.md** - Pull Request Creation
   - Creates `.tmp/issue-info.md` and `.tmp/pr-body.md`
   - Complete PR workflow with validation
   - Dual temporary file cleanup

5. **kupdate.md** - Knowledge Management
   - Creates `.tmp/knowledge-content.md` for knowledge entries
   - Auto-generated knowledge IDs and category labels
   - Cleanup after knowledge issue creation

## Enforced Workflow Pattern

### Standard .tmp Folder Usage Pattern

```bash
# Step 1: Setup .tmp folder (MANDATORY)
mkdir -p .tmp && echo ".tmp/" >> .gitignore

# Step 2: Create temporary content
echo "content" > .tmp/temp-file.md

# Step 3: Use temporary file with GitHub CLI
gh issue create --body-file .tmp/temp-file.md ...

# Step 4: Cleanup temporary files (MANDATORY)
rm .tmp/temp-file.md
```

### Automatic Verification Steps

All commands now include:

1. **Pre-Operation Setup**:
   - Create `.tmp/` folder if not exists
   - Add `.tmp/` to `.gitignore` if not present

2. **Temporary File Creation**:
   - Generate content in `.tmp/[purpose].md`
   - Use descriptive filenames (e.g., `task-content.md`, `pr-body.md`)

3. **GitHub CLI Integration**:
   - Use `--body-file .tmp/[filename].md` for all issue/PR creation
   - Pass content via file instead of command line arguments

4. **Post-Operation Cleanup**:
   - Remove temporary files immediately after use
   - Verify cleanup success before command completion

## Benefits of .tmp Folder Enforcement

### üîí Security
- No temporary files left in system directories
- Project-scoped temporary file management
- Automatic .gitignore prevents accidental commits

### üßπ Cleanliness
- Zero temporary file pollution
- Automatic cleanup after each operation
- Project folder remains organized

### üîç Debugging
- Temporary files are project-local for inspection
- Easy to debug failed operations
- Clear file naming convention

### üöÄ Performance
- Project-local file operations are faster
- No cross-filesystem temporary file access
- Reduced permission issues

## Implementation Status

- ‚úÖ **CLAUDE.md** - Updated with strict .tmp folder policy
- ‚úÖ **AGENTS.md** - Updated with strict .tmp folder policy
- ‚úÖ **GitHub Instruction Templates** - All 4 templates updated
- ‚úÖ **Claude Code Slash Commands** - All 5 major commands updated
- ‚úÖ **Enforcement Pattern** - Standardized across all commands
- ‚úÖ **Automatic Verification** - Built into command workflows

## Verification Checklist

For any new command or modification:

- [ ] Creates `.tmp/` folder if not exists
- [ ] Adds `.tmp/` to `.gitignore` if not present
- [ ] Uses `.tmp/` folder for ALL temporary files
- [ ] NEVER uses system temp directories
- [ ] Cleans up temporary files after each operation
- [ ] Verifies cleanup success before completion

---

**All workflow commands now enforce strict .tmp folder usage with automatic setup and cleanup.**